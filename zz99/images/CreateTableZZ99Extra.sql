DROP TABLE ZZ9903T00;
DROP TABLE ZZ9905T00;
DROP TABLE ZZ9904T00;

--PROVINCIA
CREATE TABLE ZZ9904T00
	(ID_04 NUMBER(3) NOT NULL,
	NOMBRE_04 VARCHAR2(100) NOT NULL ENABLE,
	CONSTRAINT PK_ZZ9904T00 PRIMARY KEY (ID_04)
	);
 
COMMENT ON COLUMN ZZ9904T00.ID_04 IS 'Código de la provincia.';
COMMENT ON COLUMN ZZ9904T00.NOMBRE_04 IS 'Descripción provincia';

CREATE OR REPLACE SYNONYM ZZ99.ZZ99_PROVINCIA FOR ZZ99.ZZ9904T00;

DROP SEQUENCE ZZ9904Q00;
CREATE SEQUENCE ZZ99.ZZ9904Q00 MINVALUE 1 MAXVALUE 99999999 INCREMENT BY 1 START WITH 1 NOCACHE;

Insert into ZZ99.ZZ9904T00 (ID_04,NOMBRE_04) values (ZZ9904Q00.NEXTVAL,'Álava');
Insert into ZZ99.ZZ9904T00 (ID_04,NOMBRE_04) values (ZZ9904Q00.NEXTVAL,'Vizcaya');
Insert into ZZ99.ZZ9904T00 (ID_04,NOMBRE_04) values (ZZ9904Q00.NEXTVAL,'Guipuzcoa');


--MUNICIPIO
CREATE TABLE ZZ9905T00
	(ID_05 NUMBER(3) NOT NULL,
	NOMBRE_05 VARCHAR2(100) NOT NULL ENABLE,
	ID_PROV_05 NUMBER(3) NOT NULL,
	CONSTRAINT PK_ZZ9905T00 PRIMARY KEY (ID_05),
	CONSTRAINT FK_ZZ9905T00 FOREIGN KEY (ID_PROV_05) REFERENCES ZZ9904T00(ID_04)
	);
 
COMMENT ON COLUMN ZZ9905T00.ID_05 IS 'Código del municipio.';
COMMENT ON COLUMN ZZ9905T00.NOMBRE_05 IS 'Descripción municipio';
COMMENT ON COLUMN ZZ9905T00.ID_PROV_05 IS 'Código de la provincia.';

CREATE OR REPLACE SYNONYM ZZ99.ZZ99_MUNICIPIO FOR ZZ99.ZZ9905T00;

DROP SEQUENCE ZZ9905Q00;
CREATE SEQUENCE ZZ99.ZZ9905Q00 MINVALUE 1 MAXVALUE 99999999 INCREMENT BY 1 START WITH 1 NOCACHE;

Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Vitoria-Gasteiz', 1);
Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Laguardia', 1);
Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Bilbao', 2);
Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Getxo', 2);
Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Donostia / San Sebastián', 3);
Insert into ZZ99.ZZ9905T00 (ID_05,NOMBRE_05,ID_PROV_05) values (ZZ9905Q00.NEXTVAL,'Eibar', 3);


--PERSONA
CREATE TABLE ZZ9903T00
	(ID_03 NUMBER(3) NOT NULL,
	NOMBRE_03 VARCHAR2(100) NOT NULL ENABLE,
	APELLIDO1_03 VARCHAR2(200) NOT NULL ENABLE,
	APELLIDO2_03 VARCHAR2(200) NOT NULL ENABLE,
	FECHA_NACIMIENTO_03   DATE NOT NULL,
	TLFONO_03		VARCHAR2(9) NOT NULL,	   
	PROVINCIA_03		NUMBER(3) NOT NULL,
	MUNICIPIO_03		NUMBER(3) NOT NULL,
	CP_03		VARCHAR2(5) NOT NULL,
	DIRECCION_03		VARCHAR2(200) NOT NULL,
	CONSTRAINT PK_ZZ9903T00 PRIMARY KEY (ID_03),
	CONSTRAINT FK_ZZ9903T00 FOREIGN KEY (PROVINCIA_03) REFERENCES ZZ9904T00(ID_04), 
	CONSTRAINT FK_ZZ9903T01 FOREIGN KEY (MUNICIPIO_03) REFERENCES ZZ9905T00(ID_05)
	);
 
COMMENT ON COLUMN ZZ9903T00.ID_03 IS 'Código de la persona.';
COMMENT ON COLUMN ZZ9903T00.NOMBRE_03 IS 'Nombre de la persona.';
COMMENT ON COLUMN ZZ9903T00.APELLIDO1_03 IS 'Primer apellido';
COMMENT ON COLUMN ZZ9903T00.APELLIDO2_03 IS 'Segundo apellido';
COMMENT ON COLUMN ZZ9903T00.FECHA_NACIMIENTO_03 IS 'Fecha de nacimiento';
COMMENT ON COLUMN ZZ9903T00.TLFONO_03 IS 'Teléfono de contacto';
COMMENT ON COLUMN ZZ9903T00.PROVINCIA_03 IS 'Provincia de residencia';
COMMENT ON COLUMN ZZ9903T00.MUNICIPIO_03 IS 'Municipio de residencia';
COMMENT ON COLUMN ZZ9903T00.CP_03 IS 'Código postal';
COMMENT ON COLUMN ZZ9903T00.DIRECCION_03 IS 'Dirección restante';


CREATE OR REPLACE SYNONYM ZZ99.ZZ99_PERSONA FOR ZZ99.ZZ9903T00;

DROP SEQUENCE ZZ9903Q00;
CREATE SEQUENCE ZZ99.ZZ9903Q00 MINVALUE 1 MAXVALUE 99999999 INCREMENT BY 1 START WITH 1 NOCACHE;


commit;